import{a as i,c as a,b as n,o as l}from"./app-C7AwxLk6.js";const e={};function h(t,s){return l(),a("div",null,s[0]||(s[0]=[n(`<h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>Hadoop分佈式文件系統（HDFS）係Hadoop應用程序使用嘅主要存儲系統。HDFS設計運行喺商用硬件上，為應用程序數據提供高吞吐量訪問，適合大數據集嘅應用程序。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>HDFS設計為一次寫入、多次讀取嘅訪問模式，可能唔適合低延遲訪問要求。</p></div><h2 id="架構概述" tabindex="-1"><a class="header-anchor" href="#架構概述"><span>架構概述</span></a></h2><h3 id="主從架構" tabindex="-1"><a class="header-anchor" href="#主從架構"><span>主從架構</span></a></h3><p>HDFS遵循主從架構，包含以下組件：</p><ul><li><strong>NameNode</strong>：管理文件系統命名空間並控制文件訪問</li><li><strong>DataNode</strong>：存儲實際數據塊並為客戶端提供讀寫請求服務</li><li><strong>Client</strong>：訪問HDFS數據嘅應用程序</li></ul><div class="vp-steps"><ol><li><strong>NameNode</strong>：維護文件系統樹和元數據</li><li><strong>DataNodes</strong>：喺集群中存儲數據塊</li><li><strong>Client</strong>：與NameNode和DataNode進行通信</li></ol></div><h3 id="核心組件" tabindex="-1"><a class="header-anchor" href="#核心組件"><span>核心組件</span></a></h3><h4 id="namenode" tabindex="-1"><a class="header-anchor" href="#namenode"><span>NameNode</span></a></h4><p>NameNode係HDFS嘅核心組件：</p><ul><li><strong>元數據管理</strong>：存儲文件系統命名空間（目錄樹、文件名、權限等）</li><li><strong>塊管理</strong>：跟蹤數據塊及其位置</li><li><strong>訪問控制</strong>：管理客戶端對文件嘅訪問</li></ul><div class="hint-container tip"><p class="hint-container-title">提示</p><p>喺標準HDFS集群中，NameNode係單點故障。考慮為生產環境使用高可用性（HA）配置。</p></div><h4 id="datanode" tabindex="-1"><a class="header-anchor" href="#datanode"><span>DataNode</span></a></h4><p>DataNode係HDFS嘅工作節點：</p><ul><li><strong>數據存儲</strong>：存儲實際數據塊（通常每個128MB或256MB）</li><li><strong>心跳機制</strong>：定期向NameNode報告</li><li><strong>塊驗證</strong>：使用校驗和驗證數據完整性</li></ul><h4 id="client" tabindex="-1"><a class="header-anchor" href="#client"><span>Client</span></a></h4><p>客戶端組件：</p><ul><li><strong>文件操作</strong>：發起讀寫請求</li><li><strong>NameNode通信</strong>：查詢元數據和塊位置</li><li><strong>DataNode通信</strong>：直接與DataNode進行數據傳輸</li></ul><h2 id="數據存儲模型" tabindex="-1"><a class="header-anchor" href="#數據存儲模型"><span>數據存儲模型</span></a></h2><h3 id="數據塊" tabindex="-1"><a class="header-anchor" href="#數據塊"><span>數據塊</span></a></h3><p>HDFS將數據存儲喺大塊中：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 檢查當前塊大小</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfsadmin</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -confKey</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs.blocksize</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 典型塊大小：</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># - Hadoop 1.x: 64MB</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># - Hadoop 2.x: 128MB（默認）</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># - Hadoop 3.x: 128MB（默認），最大2GB</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="複製" tabindex="-1"><a class="header-anchor" href="#複製"><span>複製</span></a></h3><p>HDFS喺多個DataNode之間複製數據塊：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 檢查複製因子</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfsadmin</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -confKey</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs.replication</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 典型複製因子：3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="vp-steps"><ol><li>客戶端將數據寫入第一個DataNode</li><li>第一個DataNode將數據轉發到後續DataNode</li><li>數據以管道方式寫入</li><li>所有副本必須成功寫入</li></ol></div><h2 id="hdfs命令" tabindex="-1"><a class="header-anchor" href="#hdfs命令"><span>HDFS命令</span></a></h2><h3 id="基本文件操作" tabindex="-1"><a class="header-anchor" href="#基本文件操作"><span>基本文件操作</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 創建目錄</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 上傳本地文件到HDFS</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -put</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> localfile.txt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 從HDFS下載文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop/remote.txt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> local.txt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 列出文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -ls</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 刪除文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -rm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop/oldfile.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="高級操作" tabindex="-1"><a class="header-anchor" href="#高級操作"><span>高級操作</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 設置複製因子</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -setrep</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -R</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 檢查磁盤使用情況</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -du</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 檢查文件系統狀態</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfsadmin</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -report</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 進入安全模式（維護模式）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfsadmin</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -safemode</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enter</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfsadmin</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -safemode</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> leave</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="配置文件" tabindex="-1"><a class="header-anchor" href="#配置文件"><span>配置文件</span></a></h2><h3 id="核心配置" tabindex="-1"><a class="header-anchor" href="#核心配置"><span>核心配置</span></a></h3><p>編輯 <code>core-site.xml</code>：</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">configuration</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">fs.defaultFS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">hdfs://namenode:8020</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">hadoop.tmp.dir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/var/hadoop/tmp</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">configuration</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="hdfs配置" tabindex="-1"><a class="header-anchor" href="#hdfs配置"><span>HDFS配置</span></a></h3><p>編輯 <code>hdfs-site.xml</code>：</p><div class="language-xml line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="xml" style="--vp-collapsed-lines:15;--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">configuration</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">dfs.namenode.name.dir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/var/hadoop/hdfs/namenode</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">dfs.datanode.data.dir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/var/hadoop/hdfs/datanode</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">dfs.replication</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">dfs.blocksize</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">134217728</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">configuration</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h2 id="性能優化" tabindex="-1"><a class="header-anchor" href="#性能優化"><span>性能優化</span></a></h2><h3 id="塊大小配置" tabindex="-1"><a class="header-anchor" href="#塊大小配置"><span>塊大小配置</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 最佳塊大小考慮因素：</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># - 大文件：使用更大嘅塊（256MB、512MB、1GB）</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># - 小文件：使用更小嘅塊（64MB、128MB）</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># - 考慮MapReduce分割大小對齊</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 為特定操作設置塊大小</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -D</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs.blocksize=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">268435456</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -put</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> largefile.dat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="內存配置" tabindex="-1"><a class="header-anchor" href="#內存配置"><span>內存配置</span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">&lt;!-- 喺mapred-site.xml中 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">mapreduce.map.memory.mb</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">1536</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">mapreduce.reduce.memory.mb</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    &lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">3072</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">property</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安全考慮" tabindex="-1"><a class="header-anchor" href="#安全考慮"><span>安全考慮</span></a></h2><h3 id="身份驗證" tabindex="-1"><a class="header-anchor" href="#身份驗證"><span>身份驗證</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 啟用Kerberos身份驗證</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -D</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hadoop.security.authentication=kerberos</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -ls</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="權限" tabindex="-1"><a class="header-anchor" href="#權限"><span>權限</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 設置文件權限</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -chmod</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 750</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop/protected</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 設置所有權</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -chown</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hadoop:hadoop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop/data</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看權限</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -ls</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -la</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="監控和維護" tabindex="-1"><a class="header-anchor" href="#監控和維護"><span>監控和維護</span></a></h2><h3 id="健康檢查" tabindex="-1"><a class="header-anchor" href="#健康檢查"><span>健康檢查</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 檢查集群健康狀態</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfsadmin</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -report</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 檢查DataNode狀態</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfsadmin</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -report</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -live</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 檢查複製不足嘅塊</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fsck</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -locations</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -files</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -blocks</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="維護操作" tabindex="-1"><a class="header-anchor" href="#維護操作"><span>維護操作</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 回滾NameNode編輯</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfsadmin</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -rollEdits</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 刷新DataNode</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfsadmin</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -refreshNodes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 停用DataNode</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">datanode3.example.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> decommissioning-nodes.txt</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfsadmin</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -refreshNodes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常見問題和解決方案" tabindex="-1"><a class="header-anchor" href="#常見問題和解決方案"><span>常見問題和解決方案</span></a></h2><h3 id="問題1-namenode無法啟動" tabindex="-1"><a class="header-anchor" href="#問題1-namenode無法啟動"><span>問題1：NameNode無法啟動</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 檢查NameNode日誌</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tail</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/hadoop/hdfs/namenode.log</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 檢查現有進程</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">jps</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> grep</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> NameNode</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 安全模式故障排除</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfsadmin</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -safemode</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="問題2-datanode連接問題" tabindex="-1"><a class="header-anchor" href="#問題2-datanode連接問題"><span>問題2：DataNode連接問題</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 檢查DataNode狀態</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfsadmin</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -report</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -dead</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 驗證DataNode日誌</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tail</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/hadoop/hdfs/datanode.log</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 重置DataNode</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -rf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/hadoop/hdfs/datanode/</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> datanode</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -format</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="問題3-磁盤空間問題" tabindex="-1"><a class="header-anchor" href="#問題3-磁盤空間問題"><span>問題3：磁盤空間問題</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 檢查磁盤使用情況</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfsadmin</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -report</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 識別大文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -du</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sort</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -nr</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> head</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -10</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 清理臨時文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -expunge</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="最佳實踐" tabindex="-1"><a class="header-anchor" href="#最佳實踐"><span>最佳實踐</span></a></h2><h3 id="數據管理" tabindex="-1"><a class="header-anchor" href="#數據管理"><span>數據管理</span></a></h3><ol><li><strong>使用適當嘅文件大小</strong>：喺HDFS中存儲大文件（100MB+）</li><li><strong>避免小文件</strong>：對小文件使用Hadoop SequenceFile、Avro或Parquet</li><li><strong>壓縮數據</strong>：使用壓縮來節省存儲空間</li><li><strong>分區數據</strong>：合理組織數據以提高性能</li></ol><h3 id="性能調優" tabindex="-1"><a class="header-anchor" href="#性能調優"><span>性能調優</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 啟用壓縮</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hadoop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> jar</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hadoop-examples.jar</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> teragen</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -Dmapreduce.map.output.compress=true</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">    -Dmapreduce.map.output.compress.codec=org.apache.hadoop.io.compress.GzipCodec</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    1000000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop/output</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 使用適當嘅文件格式</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hadoop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> jar</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> parquet-tools.jar</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> schema</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> input.parquet</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="運營卓越" tabindex="-1"><a class="header-anchor" href="#運營卓越"><span>運營卓越</span></a></h3><ol><li><strong>監控集群健康</strong>：定期進行健康檢查</li><li><strong>規劃增長</strong>：根據需要擴展DataNode</li><li><strong>備份關鍵數據</strong>：定期備份重要文件</li><li><strong>記錄配置</strong>：保持配置文件記錄</li><li><strong>測試程序</strong>：測試備份和恢復程序</li></ol><h2 id="結論" tabindex="-1"><a class="header-anchor" href="#結論"><span>結論</span></a></h2><p>HDFS係為大規模數據處理而設計嘅強大分佈式文件系統。了解其架構、組件和最佳實踐對於有效部署和操作至關重要。通過遵循本文檔中嘅指導原則，您可以優化HDFS性能並確保大數據應用程序嘅可靠數據存儲。</p><p>記住：<strong>喺生產環境應用更改之前，始終喺暫存環境中進行測試，並維護關鍵數據嘅適當備份。</strong></p><hr><p><em>本介紹提供咗HDFS基礎知識嘅全面概述。始終根據您嘅特定環境和要求調整配置和程序。</em></p>`,73)]))}const k=i(e,[["render",h]]),d=JSON.parse('{"path":"/zh-TW/article/8mjmh68o/","title":"HDFS入門：架構、組件和最佳實踐","lang":"zh-TW","frontmatter":{"title":"HDFS入門：架構、組件和最佳實踐","createTime":"2025/08/08 20:10:41","permalink":"/zh-TW/article/8mjmh68o/","tags":["Hadoop","HDFS","大數據","分佈式系統"]},"readingTime":{"minutes":18.11,"words":1449},"git":{"createdTime":1754659072000,"updatedTime":1754659072000,"changelog":[{"hash":"7a6b901b4322382a410b760adb1fc2f1070102aa","time":1754659072000,"email":"yunfeng.long@yahoo.com","author":"WARREN Y.F. LONG","message":"feat: introduce new section Hadoop"}]},"filePathRelative":"zh-TW/實戰工作坊/8mjmh68o.md","headers":[],"categoryList":[{"id":"37da1d","sort":10004,"name":"實戰工作坊"}]}');export{k as comp,d as data};
