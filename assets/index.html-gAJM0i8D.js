import{a as i,c as a,b as n,o as e}from"./app-C7AwxLk6.js";const h={};function l(d,s){return e(),a("div",null,s[0]||(s[0]=[n(`<h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>重置Hadoop HDFS（Hadoop分布式文件系統）係系統管理員喺各種情況下可能需要執行嘅關鍵操作。無論您係從系統故障中恢復、排查數據損壞問題，定係為測試準備乾淨嘅環境，了解點樣安全咁重置HDFS都係必不可少嘅。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>HDFS重置操作涉及數據操作，如果執行唔當可能會導致數據丟失。繼續之前，請確保您有適當嘅備份並且了解相關影響。</p></div><h2 id="前置條件" tabindex="-1"><a class="header-anchor" href="#前置條件"><span>前置條件</span></a></h2><p>喺試任何HDFS重置操作之前，請確保您已具備：</p><ol><li><strong>備份數據</strong>：喺執行重置操作之前始終創建重要數據嘅備份</li><li><strong>停止運行嘅服務</strong>：停止所有Hadoop服務以防止喺重置過程中出現衝突</li><li><strong>檢查集群狀態</strong>：驗證HDFS集群嘅當前健康狀態</li><li><strong>記錄當前配置</strong>：保存當前配置文件以供參考</li></ol><h2 id="逐步hdfs重置流程" tabindex="-1"><a class="header-anchor" href="#逐步hdfs重置流程"><span>逐步HDFS重置流程</span></a></h2><h3 id="第一步-停止hadoop服務" tabindex="-1"><a class="header-anchor" href="#第一步-停止hadoop服務"><span>第一步：停止Hadoop服務</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 停止所有Hadoop服務</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stop-dfs.sh</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stop-yarn.sh</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mr-jobhistory-daemon.sh</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> historyserver</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="vp-steps"><ul><li>使用<code>jps</code>命令驗證所有服務已停止</li><li>檢查是否有剩餘進程，如有必要手動終止</li></ul></div><h3 id="第二步-清除hdfs數據" tabindex="-1"><a class="header-anchor" href="#第二步-清除hdfs數據"><span>第二步：清除HDFS數據</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 格式化HDFS文件系統</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> namenode</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -format</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 可選：手動清除數據目錄</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -rf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/hadoop/hdfs/namenode/</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -rf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/hadoop/hdfs/datanode/</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -rf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /tmp/hadoop-</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>謹慎使用<code>rm -rf</code>命令，因為佢會永久刪除文件。執行前請仔細檢查路徑。</p></div><h3 id="第三步-重新創建hdfs目錄結構" tabindex="-1"><a class="header-anchor" href="#第三步-重新創建hdfs目錄結構"><span>第三步：重新創建HDFS目錄結構</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 創建必要嘅目錄</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/hadoop/hdfs/namenode</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/hadoop/hdfs/datanode</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /tmp/hadoop-</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">whoami</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 設置適當嘅權限</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chown</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -R</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> $(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">whoami</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">whoami</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/hadoop/hdfs</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chown</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -R</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> $(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">whoami</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">whoami</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /tmp/hadoop-</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">whoami</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="第四步-重啟hadoop服務" tabindex="-1"><a class="header-anchor" href="#第四步-重啟hadoop服務"><span>第四步：重啟Hadoop服務</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 格式化HDFS（如果尚未完成）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> namenode</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -format</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 啟動HDFS服務</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">start-dfs.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 啟動YARN服務</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">start-yarn.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 啟動HistoryServer</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mr-jobhistory-daemon.sh</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> historyserver</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="vp-steps"><ul><li>監控啟動過程中是否有任何錯誤</li><li>使用<code>jps</code>檢查服務狀態</li><li>使用<code>hdfs dfsadmin -report</code>驗證HDFS是否正常運行</li></ul></div><h2 id="驗證步驟" tabindex="-1"><a class="header-anchor" href="#驗證步驟"><span>驗證步驟</span></a></h2><p>完成重置過程後，驗證您嘅HDFS集群是否正常運行：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 檢查HDFS報告</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfsadmin</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -report</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 列出根目錄</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -ls</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 測試文件操作</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /test</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -put</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/passwd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /test/passwd</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /test/passwd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常見問題同解決方案" tabindex="-1"><a class="header-anchor" href="#常見問題同解決方案"><span>常見問題同解決方案</span></a></h2><h3 id="問題1-namenode格式問題" tabindex="-1"><a class="header-anchor" href="#問題1-namenode格式問題"><span>問題1：NameNode格式問題</span></a></h3><div class="hint-container warning"><p class="hint-container-title">注意</p><p>如果遇到&quot;唔兼容嘅文件系統&quot;錯誤，您可能需要執行乾淨嘅格式化：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 停止服務</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stop-dfs.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 清除目錄</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -rf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/hadoop/hdfs/namenode/</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -rf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/hadoop/hdfs/datanode/</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 格式化並重啟</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> namenode</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -format</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">start-dfs.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h3 id="問題2-權限被拒絕錯誤" tabindex="-1"><a class="header-anchor" href="#問題2-權限被拒絕錯誤"><span>問題2：權限被拒絕錯誤</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 修復權限</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> chown</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -R</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> $(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">whoami</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">whoami</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/hadoop/hdfs</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> chown</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -R</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> $(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">whoami</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">whoami</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /tmp/hadoop-</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="問題3-datanode註冊失敗" tabindex="-1"><a class="header-anchor" href="#問題3-datanode註冊失敗"><span>問題3：Datanode註冊失敗</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 移除datanode ID並重啟</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -rf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/hadoop/hdfs/datanode/current</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stop-dfs.sh</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">start-dfs.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="備份同恢復策略" tabindex="-1"><a class="header-anchor" href="#備份同恢復策略"><span>備份同恢復策略</span></a></h2><h3 id="創建備份" tabindex="-1"><a class="header-anchor" href="#創建備份"><span>創建備份</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 備份HDFS配置</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cp</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/hadoop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/hadoop-config-backup-</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">date</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +%Y%m%d</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 從HDFS備份重要數據</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -cp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop/input</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop/input-backup</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="恢復程序" tabindex="-1"><a class="header-anchor" href="#恢復程序"><span>恢復程序</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 恢復配置（如果需要）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cp</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/hadoop-config-backup-</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/hadoop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 恢復數據（如果已備份）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hdfs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dfs</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -cp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop/input-backup/</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /user/hadoop/input/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="最佳實踐" tabindex="-1"><a class="header-anchor" href="#最佳實踐"><span>最佳實踐</span></a></h2><ol><li><strong>始終先備份</strong>：喺沒有適當備份嘅情況下絕不執行重置</li><li><strong>喺暫存環境中測試</strong>：首先喺暫存環境中測試重置程序</li><li><strong>記錄所有操作</strong>：保持所有操作嘅詳細記錄</li><li><strong>監控性能</strong>：重置後密切監控集群性能</li><li><strong>更新文檔</strong>：用任何配置更改更新集群文檔</li></ol><h2 id="安全注意事項" tabindex="-1"><a class="header-anchor" href="#安全注意事項"><span>安全注意事項</span></a></h2><div class="hint-container caution"><p class="hint-container-title">警告</p><p><em>本指南提供咗HDFS重置操作嘅全面方法。始終根據您嘅特定環境同需求調整程序。</em></p><p>⚠️ <strong>警告</strong>：HDFS重置操作係不可逆嘅，如果喺以下情況下將導致數據丟失：</p><ul><li>您沒有備份數據</li><li>您喺錯誤路徑上執行命令</li><li>您跳過驗證步驟</li></ul><p>始終仔細檢查：</p><ul><li>刪除前嘅文件路徑</li><li>操作前嘅服務狀態</li><li>重置前嘅備份完整性</li></ul></div>`,37)]))}const p=i(h,[["render",l]]),k=JSON.parse('{"path":"/zh-TW/article/xoezzczl/","title":"HDFS重置完全指南：安全恢復與數據保護","lang":"zh-TW","frontmatter":{"title":"HDFS重置完全指南：安全恢復與數據保護","createTime":"2025/04/08 20:10:41","permalink":"/zh-TW/article/xoezzczl/","tags":["Hadoop","HDFS"]},"readingTime":{"minutes":12.79,"words":1023},"git":{"createdTime":1754659072000,"updatedTime":1754659072000,"changelog":[{"hash":"7a6b901b4322382a410b760adb1fc2f1070102aa","time":1754659072000,"email":"yunfeng.long@yahoo.com","author":"WARREN Y.F. LONG","message":"feat: introduce new section Hadoop"}]},"filePathRelative":"zh-TW/實戰工作坊/xoezzczl.md","headers":[],"categoryList":[{"id":"37da1d","sort":10004,"name":"實戰工作坊"}]}');export{p as comp,k as data};
